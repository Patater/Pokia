<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pokia</title>
<style type="text/css">
  .button {
    position: absolute;
  }
  .img_button {
    opacity: 0.01;
    position: absolute;
  }
  .lcd {
    position: absolute;
  }
</style>
</head>
<body>

<canvas id="waveform" width="1" height="1"></canvas>
<pre id="debug"></pre>
<img id="phone-screen" style="position: absolute;"
src="POKIA-screen.png" width="1" height="1">
<canvas class="lcd" id="lcd" width="1149" height="843"></canvas>
<img id="phone-shadowscreen" style="position: absolute;"
src="POKIA-shadowscreen.png" width="1" height="1">
<img id="phone-body" style="position: absolute;"
src="POKIA-body.png" width="1" height="1">

<img src="pad-power.png" class="img_button" id="power-img"/>
<img src="pad-soft.png" class="img_button" id="soft-img"/>
<img src="pad-up.png" class="img_button" id="up-img"/>
<img src="pad-clear.png" class="img_button" id="clear-img"/>
<img src="pad-down.png" class="img_button" id="down-img"/>
<img src="pad-one.png" class="img_button" id="one-img"/>
<img src="pad-two.png" class="img_button" id="two-img"/>
<img src="pad-three.png" class="img_button" id="three-img"/>
<img src="pad-four.png" class="img_button" id="four-img"/>
<img src="pad-five.png" class="img_button" id="five-img"/>
<img src="pad-six.png" class="img_button" id="six-img"/>
<img src="pad-seven.png" class="img_button" id="seven-img"/>
<img src="pad-eight.png" class="img_button" id="eight-img"/>
<img src="pad-nine.png" class="img_button" id="nine-img"/>
<img src="pad-asterisk.png" class="img_button" id="asterisk-img"/>
<img src="pad-zero.png" class="img_button" id="zero-img"/>
<img src="pad-hash.png" class="img_button" id="hash-img"/>

<div class="button" id="power"></div>
<div class="button" id="soft"></div>
<div class="button" id="up"></div>
<div class="button" id="clear"></div>
<div class="button" id="down"></div>
<div class="button" id="one"></div>
<div class="button" id="two"></div>
<div class="button" id="three"></div>
<div class="button" id="four"></div>
<div class="button" id="five"></div>
<div class="button" id="six"></div>
<div class="button" id="seven"></div>
<div class="button" id="eight"></div>
<div class="button" id="nine"></div>
<div class="button" id="asterisk"></div>
<div class="button" id="zero"></div>
<div class="button" id="hash"></div>

<script src="bitmaps.js"></script>
<script src="synthesizer.js"></script>
<script src="ui.js"></script>

<script>

window.addEventListener('load', init, false);

var debugMode = false;

function init() {
  displayButtons();
  initLCD();
  resizePhone();
  renderLCD();
  loadSong(composerSong);
  initSynthesizer();
}

function loadSong(song)
{
  //song.parseRTTTL(rtttlNokiaTune);
  song.parseComposer("Nyan Cat", 140, nokiaComposerNyanCat);
  //song.parseComposer("Epic Sax", 63, nokiaComposerEpicSax);
  cursor.position = song.notes.length;
  cursor.composerOctave = 2;
  cursor.duration = 8;
  notesRemaining = 50 - song.notes.length;
  if (notesRemaining < 0) {
    notesRemaining = 0;
  }
}

// Nokia Composer Nyan Cat
// http://www.youtube.com/watch?v=eMD6hThdFFo
// Tempo 180
var nokiaComposerNyanCat = "8#f3 8#g3 16#c3 8#d3 16#c3 16d3 16#c3 8b2 8b2" +
" 8#c3 8d3 16d3 16#c3 16b2 16#c3 16#d3 16#f3 16#g3 16#d3 16#f3 16#c3 16#d3" +
" 16b2 16#c3 16b2 8#d3 8#f3 16#g3 16#d3 16#f3 16#c3 16#d3 16b2 16#c3 16#d3" +
" 16d3 16#c3 16b2 16#c3 8d3 16b2 16#c3 16#d3 16#f3 16#c3 16d3 16#c3 16b2" +
" 8#c3 8b2";

// Nokia Composer Epic Sax
// http://www.youtube.com/watch?v=hsX3wPawqZI
// Tempo 63
var nokiaComposerEpicSax = "8a1 8- 16a1 32a1 32a1 32g1 16a1 32- 8a1 8- 16a1" +
" 32a1 32a1 32g1 16a1 32- 8a1 16- 8c2 8a1 8g1 16f1 16- 16d1 16d1 16e1 16f1" +
" 16d1";

// Nokia Composer Chromatic Scale
// This is longer than 50 notes, so real Nokia phones can't play it.
var nokiaComposerChromaticScale = "4c1 4- 4#c1 4- 4d1 4- 4#d1 4- 4e1 4- 4f1" +
" 4- 4#f1 4- 4g1 4- 4#g1 4- 4a1 4- 4#a1 4- 4b1 4- 4c2 4- 4#c2 4- 4d2 4-" +
" 4#d2 4- 4e2 4- 4f2 4- 4#f2 4- 4g2 4- 4#g2 4- 4a2 4- 4#a2 4- 4b2 4- 4c3" +
" 4- 4#c3 4- 4d3 4- 4#d3 4- 4e3 4- 4f3 4- 4#f3 4- 4g3 4- 4#g3 4- 4a3 4-" +
" 4#a3 4- 4b3 4-";

// RTTTL Nokia Tune
// https://en.wikipedia.org/wiki/Nokia_tune
var rtttlNokiaTune =
"Nokia:o=5,d=8,b=240:E6,D6,4F#,4G#,C#6,B,4D,4E,B,A,4C#,4E,2A.";

var nokiaComposerNokiaTune =
"8e2 8d2 4#f1 4#g1 8#c2 8b1 4d1 4e1 8b1 8a1 4#c1 4e1 2.a1";

</script>

</body>
</html>
