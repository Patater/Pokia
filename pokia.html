<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pokia</title>
<style type="text/css">
  .button {
    background-color: #ffffff;
    opacity: 0.2;
    position: absolute;
  }
  .lcd {
    position: absolute;
  }
</style>
</head>
<body>

<canvas id="waveform" width="1" height="1"></canvas>
<pre id="debug"></pre>
<img id="phone-bg" style="position: absolute;"
src="nookia-screenBG.png" width="1" height="1">
<canvas class="lcd" id="lcd" width="1149" height="843"></canvas>
<img id="phone-fg" style="position: absolute;"
src="nookia-phoneFG.png" width="1" height="1">
<button style="display: none;" class="button" id="power"></button>
<button style="display: none;" class="button" id="soft"></button>
<button style="display: none;" class="button" id="up"></button>
<button style="display: none;" class="button" id="clear"></button>
<button style="display: none;" class="button" id="down"></button>
<button style="display: none;" class="button" id="one"></button>
<button style="display: none;" class="button" id="two"></button>
<button style="display: none;" class="button" id="three"></button>
<button style="display: none;" class="button" id="four"></button>
<button style="display: none;" class="button" id="five"></button>
<button style="display: none;" class="button" id="six"></button>
<button style="display: none;" class="button" id="seven"></button>
<button style="display: none;" class="button" id="eight"></button>
<button style="display: none;" class="button" id="nine"></button>
<button style="display: none;" class="button" id="asterisk"></button>
<button style="display: none;" class="button" id="zero"></button>
<button style="display: none;" class="button" id="hash"></button>

<script src="bitmaps.js"></script>
<script src="synthesizer.js"></script>
<script src="ui.js"></script>

<script>

window.addEventListener('load', init, false);

var debugMode = false;

function init() {
  displayButtons();
  initLCD();
  resizePhone();
  renderLCD();
  loadSong(composerSong);
  initSynthesizer();
}

function loadSong(song)
{
  //song.parseRTTTL(rtttlNokiaTune);
  song.parseComposer("Nyan Cat", 140, nokiaComposerNyanCat);
  //song.parseComposer("Epic Sax", 63, nokiaComposerEpicSax);
  cursor.position = song.notes.length;
  cursor.composerOctave = 2;
  cursor.duration = 8;
  notesRemaining = 50 - song.notes.length;
  if (notesRemaining < 0) {
    notesRemaining = 0;
  }
}

// Nokia Composer Nyan Cat
// http://www.youtube.com/watch?v=eMD6hThdFFo
// Tempo 180
var nokiaComposerNyanCat = "8#f3 8#g3 16#c3 8#d3 16#c3 16d3 16#c3 8b2 8b2" +
" 8#c3 8d3 16d3 16#c3 16b2 16#c3 16#d3 16#f3 16#g3 16#d3 16#f3 16#c3 16#d3" +
" 16b2 16#c3 16b2 8#d3 8#f3 16#g3 16#d3 16#f3 16#c3 16#d3 16b2 16#c3 16#d3" +
" 16d3 16#c3 16b2 16#c3 8d3 16b2 16#c3 16#d3 16#f3 16#c3 16d3 16#c3 16b2" +
" 8#c3 8b2";

// Nokia Composer Epic Sax
// http://www.youtube.com/watch?v=hsX3wPawqZI
// Tempo 63
var nokiaComposerEpicSax = "8a1 8- 16a1 32a1 32a1 32g1 16a1 32- 8a1 8- 16a1" +
" 32a1 32a1 32g1 16a1 32- 8a1 16- 8c2 8a1 8g1 16f1 16- 16d1 16d1 16e1 16f1" +
" 16d1";

// Nokia Composer Chromatic Scale
// This is longer than 50 notes, so real Nokia phones can't play it.
var nokiaComposerChromaticScale = "4c1 4- 4#c1 4- 4d1 4- 4#d1 4- 4e1 4- 4f1" +
" 4- 4#f1 4- 4g1 4- 4#g1 4- 4a1 4- 4#a1 4- 4b1 4- 4c2 4- 4#c2 4- 4d2 4-" +
" 4#d2 4- 4e2 4- 4f2 4- 4#f2 4- 4g2 4- 4#g2 4- 4a2 4- 4#a2 4- 4b2 4- 4c3" +
" 4- 4#c3 4- 4d3 4- 4#d3 4- 4e3 4- 4f3 4- 4#f3 4- 4g3 4- 4#g3 4- 4a3 4-" +
" 4#a3 4- 4b3 4-";

// RTTTL Nokia Tune
// https://en.wikipedia.org/wiki/Nokia_tune
var rtttlNokiaTune =
"Nokia:o=5,d=8,b=240:E6,D6,4F#,4G#,C#6,B,4D,4E,B,A,4C#,4E,2A.";

var nokiaComposerNokiaTune =
"8e2 8d2 4#f1 4#g1 8#c2 8b1 4d1 4e1 8b1 8a1 4#c1 4e1 2.a1";

</script>

</body>
</html>
